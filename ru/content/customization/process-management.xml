<?xml version='1.0' encoding='UTF-8'?>
<!DOCTYPE chapter PUBLIC "-//OASIS//DTD DocBook XML V4.4//EN" "http://www.oasis-open.org/docbook/xml/4.4/docbookx.dtd">


<!-- $Id: process-management.xml,v 1.4 2012-12-03 08:37:27 mg Exp $ -->
<section id="process-management" >
<title>Process Management</title>

    <!--  TODO CR2 Review -->
<section>
        <title>Introduction</title>
        <para>
            This feature of OTRS allows you to model processes (workflows) in the ticket
system.  The basic idea is to be able to define reoccurring processes, and
to delegate work items to different people, as well as leading the progress
of a process in different directions based on certain criteria.
        </para>
    </section>
    <section>
        <title>Example process</title>
        <para>
            Давайте рассмотрим некий пример чтобы все было более наглядно и понятно. Мы
будем рассматривать процесс покупки книги:
        </para>

        <section>
            <title>Запись спроса</title>
            <para>
                Прежде чем заказ будет размещен, запрос на литературу работником будет
записан. Следующая книга нужна в нашем примере:
            </para>
            <para>
                <screen>
Title: Prozessmanagement für Dummies
Autor: Thilo Knuppertz
ISBN: 3527703713
                </screen>
            </para>
        </section>

        <section>
            <title>Утверждено начальником</title>
            <para>
                The head of the employee's department needs to decide on the order.  In case
of a denial, a reason should be recorded by the superior.  In case of
approval, the order is passed to the purchasing department.
            </para>
        </section>

        <section>
            <title>Обрабатывается отделом закупок</title>
            <para>
                Purchasing now has the task to find out where the book can be ordered with
the best conditions.  If it is out of stock, this can be recorded in the
order.  In case of a successful order purchasing will record the supplier,
the price and the delivery date.
            </para>
        </section>

        <section>
            <title>Обрабатывается почтовым отделом</title>
            <para>
                The shipment will arrive at the company. The incoming goods department
checks the shipment and records the date of receipt.  Now the employee will
be informed that their order has arrived and is ready to be collected.
            </para>
        </section>
    </section>

    <section>
        <title>Выполнение примера</title>
        <para>
            If we assume that a ticket acts in this workflow like an accompanying
document that can receive change notes, we already have a clear picture of
process tickets.
        </para>
        <para>
            Проанализировав предыдущий пример мы можем выделить следующие пункты:
        </para>
        <para>
            <itemizedlist>
                <listitem><para>Возможность записать данные, назовем ее <emphasis>Диалоги
Деятельности</emphasis>,</para></listitem>
                <listitem><para>проверки, которые могут реагировать на автоматическое изменение данных,
назовем их <emphasis>Переходы</emphasis>,</para></listitem>
                <listitem><para>изменения, которые могут быть применены для обработки заявки после успешного
перехода обработки заявки, назовем их <emphasis>Transition
Actions</emphasis>.</para></listitem>
            </itemizedlist>
        </para>
        <para>
            Также нам необходим дополнительный элемент, который не так очевиден:
        </para>
        <para>
            <itemizedlist>
                <listitem>
                    <para>
                        A possibility to offer more than just one Activity Dialog to be available.
In our example this is needed when the superior must have the choice between
"Approve" and "Deny".  Let's call this <emphasis>Activity</emphasis>.
                </para></listitem>
            </itemizedlist>
        </para>
        <para>
            Now, with Activities, Activity Dialogs, Transitions and Transition Actions
we have the necessary tools to model the individual steps of our
example. What's still missing is an area where for each workflow the order
of the steps can be specified. Let's call this
<emphasis>Process</emphasis>. To be able to refer to all these entities
later, we will assign to them an abbreviation in parentheses. This
abbreviation is based on an internal identification mechanism called
EntityIDs.
        </para>
        <para>
            The EntityIDs are conformed with one or two letters (depending on the
process part or entity) and then a consecutive number, examples:
            <itemizedlist>
                <listitem><para>Process: 'P1', 'P2' ... 'Pn'.</para></listitem>
                <listitem><para>Activity: 'A1', 'A2' ... 'An'.</para></listitem>
                <listitem><para>Activity Dialog: 'AD1', 'AD2' ... 'ADn'.</para></listitem>
                <listitem><para>Transition: 'T1', 'T2' ... 'Tn'.</para></listitem>
                <listitem><para>Transition Action: 'TA1', 'TA2' ... 'TAn'.</para></listitem>
            </itemizedlist>
        </para>
        <para>
           Before the creation of the process and its parts is necessary to prepare the
system, we will need to define some Queues, Users and Dynamic Fields as well
as set some SysConfig options.
        </para>
        <para>
            Create the following Queues:
            <itemizedlist>
                <listitem><para>Superior</para></listitem>
                <listitem><para>Employee</para></listitem>
                <listitem><para>Purchasing</para></listitem>
                <listitem><para>Post office</para></listitem>
            </itemizedlist>
        </para>
        <para>
            Create the following Users:
            <itemizedlist>
                <listitem><para>Superior</para></listitem>
                <listitem><para>Employee</para></listitem>
            </itemizedlist>
        </para>
        <para>
            Create the following Dynamic Fields:
            <itemizedlist>
                <listitem>
                    <para>Title</para>
                    <informaltable>
                        <tgroup cols='2' align='left' colsep='1' rowsep='1'>
                            <tbody>
                                <row>
                                    <entry>Метка</entry><entry>Title</entry>
                                </row>
                                <row>
                                    <entry>Type</entry><entry>Text</entry>
                                </row>
                                <row>
                                    <entry>Object</entry><entry>Заявк</entry>
                                </row>
                            </tbody>
                        </tgroup>
                    </informaltable>
                </listitem>
                <listitem>
                    <para>Author</para>
                    <informaltable>
                        <tgroup cols='2' align='left' colsep='1' rowsep='1'>
                            <tbody>
                                <row>
                                    <entry>Метка</entry><entry>Author</entry>
                                </row>
                                <row>
                                    <entry>Type</entry><entry>Text</entry>
                                </row>
                                <row>
                                    <entry>Object</entry><entry>Заявк</entry>
                                </row>
                            </tbody>
                        </tgroup>
                    </informaltable>
                </listitem>
                <listitem>
                    <para>ISBN</para>
                    <informaltable>
                        <tgroup cols='2' align='left' colsep='1' rowsep='1'>
                            <tbody>
                                <row>
                                    <entry>Метка</entry><entry>ISBN</entry>
                                </row>
                                <row>
                                    <entry>Type</entry><entry>Text</entry>
                                </row>
                                <row>
                                    <entry>Object</entry><entry>Заявк</entry>
                                </row>
                            </tbody>
                        </tgroup>
                    </informaltable>
                </listitem>
                <listitem>
                    <para>Status</para>
                    <informaltable>
                        <tgroup cols='2' align='left' colsep='1' rowsep='1'>
                            <tbody>
                                <row>
                                    <entry>Метка</entry><entry>Status</entry>
                                </row>
                                <row>
                                    <entry>Type</entry><entry>Dropdown</entry>
                                </row>
                                <row>
                                    <entry>Object</entry><entry>Заявк</entry>
                                </row>
                                <row>
                                    <entry>Possible Values</entry>
                                    <entry>
                                        <itemizedlist>
                                            <listitem><para>Утверждение</para></listitem>
                                            <listitem><para>Approval denied</para></listitem>
                                            <listitem><para>Approved</para></listitem>
                                            <listitem><para>Order denied</para></listitem>
                                            <listitem><para>Order placed</para></listitem>
                                            <listitem><para>Shipment received</para></listitem>
                                        </itemizedlist>
                                    </entry>
                                </row>
                            </tbody>
                        </tgroup>
                    </informaltable>
                </listitem>
                <listitem>
                    <para>Supplier</para>
                    <informaltable>
                        <tgroup cols='2' align='left' colsep='1' rowsep='1'>
                            <tbody>
                                <row>
                                    <entry>Метка</entry><entry>Supplier</entry>
                                </row>
                                <row>
                                    <entry>Type</entry><entry>Text</entry>
                                </row>
                                <row>
                                    <entry>Object</entry><entry>Заявк</entry>
                                </row>
                            </tbody>
                        </tgroup>
                     </informaltable>
                </listitem>
                <listitem>
                    <para>Price</para>
                    <informaltable>
                        <tgroup cols='2' align='left' colsep='1' rowsep='1'>
                            <tbody>
                                <row>
                                    <entry>Метка</entry><entry>Price</entry>
                                </row>
                                <row>
                                    <entry>Type</entry><entry>Text</entry>
                                </row>
                                <row>
                                    <entry>Object</entry><entry>Заявк</entry>
                                </row>
                            </tbody>
                        </tgroup>
                     </informaltable>
                </listitem>
                <listitem>
                    <para>DeliveryDate</para>
                    <informaltable>
                        <tgroup cols='2' align='left' colsep='1' rowsep='1'>
                            <tbody>
                                <row>
                                    <entry>Метка</entry><entry>Delivery date</entry>
                                </row>
                                <row>
                                    <entry>Type</entry><entry>Date</entry>
                                </row>
                                <row>
                                    <entry>Object</entry><entry>Заявк</entry>
                                </row>
                            </tbody>
                        </tgroup>
                     </informaltable>
                </listitem>
                <listitem>
                    <para>DateOfReceipt</para>
                    <informaltable>
                        <tgroup cols='2' align='left' colsep='1' rowsep='1'>
                            <tbody>
                                <row>
                                    <entry>Метка</entry><entry>DateOfReceipt</entry>
                                </row>
                                <row>
                                    <entry>Type</entry><entry>Date</entry>
                                </row>
                                <row>
                                    <entry>Object</entry><entry>Заявк</entry>
                                </row>
                            </tbody>
                        </tgroup>
                     </informaltable>
                </listitem>
            </itemizedlist>
        </para>
        <para>
            Set the the following SysConfig settings:
            <itemizedlist>
                <listitem><para>'Ticket::Responsible': Yes</para></listitem>
                <listitem>
                    <para>
                        'Ticket::Frontend::AgentTicketZoom###ProcessWidgetDynamicFieldGroups':
                    </para>
                    <informaltable>
                        <tgroup cols='2' align='left' colsep='1' rowsep='1'>
                            <thead>
                                <row>
                                    <entry><emphasis>Key:</emphasis></entry>
                                    <entry><emphasis>Content:</emphasis></entry>
                                </row>
                            </thead>
                            <tbody>
                                <row>
                                    <entry>Book</entry><entry>Title, Author, ISBN</entry>
                                </row>
                                <row>
                                    <entry>Общий</entry><entry>Status</entry>
                                </row>
                                <row>
                                    <entry>Order</entry>
                                    <entry>Price, Supplier, DeliveryDate</entry>
                                </row>
                                <row>
                                    <entry>Shipment</entry><entry>DateOfReceipt</entry>
                                </row>
                            </tbody>
                        </tgroup>
                    </informaltable>
                </listitem>
                <listitem>
                    <para>
                        'Ticket::Frontend::AgentTicketZoom###ProcessWidgetDynamicField':
                    </para>
                    <informaltable>
                        <tgroup cols='2' align='left' colsep='1' rowsep='1'>
                            <thead>
                                <row>
                                    <entry><emphasis>Key:</emphasis></entry>
                                    <entry><emphasis>Content:</emphasis></entry>
                                </row>
                            </thead>
                            <tbody>
                                <row>
                                    <entry>Author</entry><entry>1</entry>
                                </row>
                                <row>
                                    <entry>DateOfReceipt</entry><entry>1</entry>
                                </row>
                                <row>
                                    <entry>DeliveryDate</entry><entry>1</entry>
                                </row>
                                <row>
                                    <entry>ISBN</entry><entry>1</entry>
                                </row>
                                <row>
                                    <entry>Price</entry><entry>1</entry>
                                </row>
                                <row>
                                    <entry>Status</entry><entry>1</entry>
                                </row>
                                <row>
                                    <entry>Supplier</entry><entry>1</entry>
                                </row>
                                <row>
                                    <entry>Title</entry><entry>1</entry>
                                </row>
                            </tbody>
                        </tgroup>
                    </informaltable>
                </listitem>
            </itemizedlist>
        </para>
        <para>
             Now lets start with the real Process Management stuff. In the next step, we
will define the individual entities that we need.
        </para>

        <section>
            <title>Process (as a container)</title>
            <para>
                To create a new process is necessary to click on the "Process Management"
link in the System Administration box in the Admin panel, this will lead to
the Process Management Overview screen. After the creation of the process we
can create all other entities (or process parts).
            </para>
            <note>
                <para>
                    Activities, Activity Dialogs, Transitions and Transition Actions defined in
one process will be available for all the processes in the system.
                </para>
            </note>
            <para>
                <screenshot>
<screeninfo>The OTRS Admin screen - System Administration</screeninfo> <graphic
srccredit="process-management - screenshot"
fileref="screenshots/pm-admin-sysadmin.png"></graphic></screenshot>
            </para>
            <para>
                <emphasis>Figure: OTRS Admin screen - System Administration.</emphasis>
            </para>

            <para>
                Click on the "Create New Process" action from the Actions box.
            </para>
            <para>
                <screenshot>
<screeninfo>Create New Process button</screeninfo> <graphic
srccredit="process-management - screenshot"
fileref="screenshots/pm-newprocess-button.png"></graphic></screenshot>
            </para>
            <para>
                <emphasis>Figure: Create New Process button.</emphasis>
            </para>

            <para>
                Fill the process information,set Process Name and the Description, we will
leave the process State as "inactive", until we finish all the tasks. Save
the process.
            </para>
            <para>
                <screenshot>
<screeninfo>Add new process</screeninfo> <graphic
srccredit="process-management - screenshot" scale='70'
fileref="screenshots/pm-newprocess-info.png"></graphic></screenshot>
            </para>
            <para>
                <emphasis>Figure: Add new process.</emphasis>
            </para>
        </section>

        <section>
            <title>Диалоги Действий</title>
                <para>
                    Click on the new process name in the Process Management Overview Screen,
then in the "Available Process Elements" click in "Activity Dialogs" (this
action will expand the activity dialog options and will collapse all others
doing and accordion like effect), then click on "Create New Activity
Dialog".
                </para>
                <para>
                    <screenshot>
<screeninfo>Create New Activity Dialog button</screeninfo> <graphic
srccredit="process-management - screenshot"
fileref="screenshots/pm-accordion-new-activitydialog.png"></graphic></screenshot>
                </para>
                <para>
                    <emphasis>Figure: Create New Activity Dialog button.</emphasis>
                </para>
                <para>
                    In the opened popup screen fill the "Activity dialog Name" as well as the
"Description (short)" fields, for this example we will leave all other
fields as the default, to assign fields to the Activity Dialog simple drag
the required field from the "Available Fields" pool and drop into the
"Assigned Fields" pool.  The order in the "Assigned Fields" pool is the
order as the fields will have in the screen, to modify the order simply drag
and drop the filed within the pool to rearrange it in the correct place.
                </para>
                <para>
                    <screenshot>
<screeninfo>Add new Activity Dialog</screeninfo> <graphic
srccredit="process-management - screenshot"
fileref="screenshots/pm-edit-activitydialog.png"></graphic></screenshot>
                </para>
                <para>
                    <emphasis>Figure: Add new Activity Dialog.</emphasis>
                </para>
                <para>
                    As soon as the fields are dropped into the "Assigned Fields" pool another
popup screen is shown with some details about the field, we will leave the
default options and only for Article fields we should make sure that the
ArticleType field is set to "note-internal".
                </para>
                <para>
                    <screenshot>
<screeninfo>Edit field details (Article)</screeninfo> <graphic
srccredit="process-management - screenshot"
fileref="screenshots/pm-edit-field-article.png"></graphic></screenshot>
                </para>
                <para>
                    <emphasis>Figure: Edit field details (Article).</emphasis>
                </para>
                <para>
                    After all fields are assigned click on the submit button in the main popup
screen to save the changes.
                </para>
                <para>
                    In this example we will use Article field for comments, but another option
could be to create a TextArea type Dynamic Field, the rest of the mentioned
fields in the lines below are the Dynamic Fields that we define before.
                </para>
                <para>
                    Please be aware that in this screen all the Dynamic Fields has the prefix
"DynamicField_" as in "DynamicField_Title", Do not confuse with the field
"Title" that is the Ticket Title.
                </para>
                <para>
                    Create the following Activity Dialogs:
                </para>
                <para>
                <itemizedlist>
                    <listitem>
                        <para>"Recoding the demand" (AD1)</para>
                        <para>
                            An Activity Dialog that contains all the required fields for the data to be
collected for the order (Title, Author and ISBN), and a Status field with
the possibility to choose "Approval".
                        </para>
                    </listitem>
                    <listitem>
                        <para>"Approval denied" (AD2)</para>
                        <para>
                            An Activity Dialog with a comment field (Article) and a Status field with
the option "Approval denied".
                        </para>
                    </listitem>
                    <listitem>
                        <para>"Approved" (AD3)</para>
                        <para>
                            Here we just need the Status field with the option "Approved".
                        </para>
                    </listitem>
                    <listitem>
                        <para>"Order rejected" (AD4)</para>
                        <para>
                            An activity dialog which makes it possible for purchasing to reject an
impossible order (book out of stock). Here we also need a comment field and
the Status field with the option "Order denied".
                        </para>
                    </listitem>
                    <listitem>
                        <para>"Order placed" (AD5)</para>
                        <para>
                            An activity dialog with the fields Supplier, Price and Delivery date for
purchasing and the Status field with the option "Order placed".
                        </para>
                    </listitem>
                    <listitem>
                        <para>"Shipment received" (AD6)</para>
                        <para>
                            An activity for the mailroom with a field for the Date of receipt and the
Status field with the option "Shipment received".
                        </para>
                    </listitem>
                </itemizedlist>
                </para>
                <para>
                    To restrict the Status field for each activity dialog we need to add some
ACLs in the Kernel/Config.pm or to a new perl file located in
Kernel/Config/Files.
                </para>
                <para>
                    <screen>
    $Self->{TicketAcl}->{'P1-AD1-1'} = {
        Properties => {
            Process => {
                ActivityDialogEntityID => ['AD1'],
            },
        },
        Possible => {
            Ticket => {
                DynamicField_Status => ['Approval'],
            },
        },
    };

    $Self->{TicketAcl}->{'P1-AD2-1'} = {
        Properties => {
            Process => {
                ActivityDialogEntityID => ['AD2'],
            },
        },
        Possible => {
            Ticket => {
                DynamicField_Status => ['Approval denied'],
            },
        },
    };

    $Self->{TicketAcl}->{'P1-AD3-1'} = {
        Properties => {
            Process => {
                ActivityDialogEntityID => ['AD3'],
            },
        },
        Possible => {
            Ticket => {
                DynamicField_Status => ['Approved'],
            },
        },
    };

    $Self->{TicketAcl}->{'P1-AD4-1'} = {
        Properties => {
            Process => {
                ActivityDialogEntityID => ['AD4'],
            },
        },
        Possible => {
            Ticket => {
                DynamicField_Status => ['Order denied'],
            },
        },
    };

    $Self->{TicketAcl}->{'P1-AD5-1'} = {
        Properties => {
            Process => {
                ActivityDialogEntityID => ['AD5'],
            },
        },
        Possible => {
            Ticket => {
                DynamicField_Status => ['Order placed'],
            },
        },
    };

    $Self->{TicketAcl}->{'P1-AD6-1'} = {
        Properties => {
            Process => {
                ActivityDialogEntityID => ['AD6'],
            },
        },
        Possible => {
            Ticket => {
                DynamicField_Status => ['Shipment received'],
            },
        },
    };
                    </screen>
                </para>
        </section>

        <section>
            <title>Transitions</title>
                <para>
                    In the "Available Process Elements" click in "Transitions", then click on
"Create New Transition".
                </para>
                <para>
                    <screenshot>
<screeninfo>Create New Transition button</screeninfo> <graphic
srccredit="process-management - screenshot"
fileref="screenshots/pm-accordion-new-transition.png"></graphic></screenshot>
                </para>
                <para>
                    <emphasis>Figure: Create New Transition button.</emphasis>
                </para>
                <para>
                    In the opened popup screen fill the "Transition Name", then in the
conditions, for this examples we will use just one condition and just one
field, for both we can leave the Type of Linking as "and" and we will use
the filed match type value as "String".
                </para>
                <para>
                    <screenshot>
<screeninfo>Add new Transition</screeninfo> <graphic
srccredit="process-management - screenshot"
fileref="screenshots/pm-edit-transtion.png"></graphic></screenshot>
                </para>
                <para>
                    <emphasis>Figure: Add new Transition.</emphasis>
                </para>
                <para>
                    After all conditions are set click on the submit button to save the changes.
                </para>
                <para>
                    Create the following Transitions:
                </para>
                <para>
                <itemizedlist>
                    <listitem>
                        <para>"Approval" (T1)</para>
                        <para>
                            A transition which checks if the Status field is set to "Approval".
                        </para>
                    </listitem>
                    <listitem>
                        <para>"Approval denied" (T2)</para>
                        <para>
                            A transition which checks if the Status field is set to "Approval denied".
                        </para>
                    </listitem>
                    <listitem>
                        <para>"Approved" (T3)</para>
                        <para>
                            A transition which checks if the Status field is set to "Approved".
                        </para>
                    </listitem>
                    <listitem>
                        <para>"Order denied" (T4)</para>
                        <para>
                            A transition which checks if the Status field is set to "Order denied".
                        </para>
                    </listitem>
                    <listitem>
                        <para>"Order placed" (T5)</para>
                        <para>
                            A transition which checks if the Status field is set to "Order placed".
                        </para>
                    </listitem>
                    <listitem>
                        <para>"Shipment received" (T6)</para>
                        <para>
                            A transition which checks if the Status field is set to "Shipment received".
                        </para>
                    </listitem>
                </itemizedlist>
                </para>
        </section>
        <section>
            <title>TransitionActions</title>
                <para>
                    Click on "Transition Actions " in the "Available Process Elements", then
click on "Create New TransitionAction".
                </para>
                <para>
                    <screenshot>
<screeninfo>Create New Transition Action button</screeninfo> <graphic
srccredit="process-management - screenshot"
fileref="screenshots/pm-accordion-new-transitionaction.png"></graphic></screenshot>
                </para>
                <para>
                    <emphasis>Figure: Create New Transition Action button.</emphasis>
                </para>
                <para>
                    In the opened popup screen fill the "Transition Name", and the "Transition
Action module" then add the required and optional parameter names and
values.
                </para>
                <para>
                    All the Transition Action Modules are located in
Kernel/System/ProcessManagement/TransitionAction and the following is the
list of bundled Transition Actions included in this release
                </para>
                <para>
                    <itemizedlist>
                        <listitem><para>ArticleCreate</para></listitem>
                        <listitem><para>CustomerSet</para></listitem>
                        <listitem><para>DynamicFieldSet</para></listitem>
                        <listitem><para>OwnerSet</para></listitem>
                        <listitem><para>QueueMove</para></listitem>
                        <listitem><para>ResponsibleSet</para></listitem>
                        <listitem><para>StateSet</para></listitem>
                        <listitem><para>TicketUnlock</para></listitem>
                    </itemizedlist>
                </para>
                <para>
                    Each module has its own and different parameters please review the module
documentation to learn all require and optional parameters.
                </para>
                <para>
                    <screenshot>
<screeninfo>Add new Transition Action</screeninfo> <graphic
srccredit="process-management - screenshot"
fileref="screenshots/pm-edit-transtionaction.png"></graphic></screenshot>
                </para>
                <para>
                    <emphasis>Figure: Add new Transition Action.</emphasis>
                </para>
                <para>
                    After all parameters and values are set click on the submit button to save
the changes.
                </para>
                <para>
                    Create the following Transitions Actions:
                </para>
                <para>
                <itemizedlist>
                    <listitem>
                        <para>Move the process ticket into the "Superior" queue (TA1)</para>
                        <para>
                            This action is supposed to be executed when the Transition "Approval" (T1)
applied.
                        </para>
                    </listitem>
                    <listitem>
                        <para>Change ticket responsible to "Superior" (TA2)</para>
                        <para>
                            To be executed when the Transition "Approval" (T1) applied.
                        </para>
                    </listitem>
                    <listitem>
                        <para>Move the process ticket into the "Employee" queue (TA3)</para>
                        <para>To be executed when:</para>
                        <itemizedlist>
                            <listitem><para>
                                The Transition "Approval denied" (T2) applied
                            </para></listitem>
                            <listitem><para>
                                The Transition "Order denied" (T4) applied
                            </para></listitem>
                            <listitem><para>
                                The Transition "Shipment received" (T6) applied
                            </para></listitem>
                        </itemizedlist>
                    </listitem>
                    <listitem>
                        <para>Change ticket responsible to "Employee" (TA4)</para>
                        <para>To be executed when:</para>
                        <itemizedlist>
                            <listitem><para>
                                The transition "Approval denied" (T2) applied
                            </para></listitem>
                            <listitem><para>
                                The transition "Order denied" (T4) applied
                            </para></listitem>
                            <listitem><para>
                                The transition "Shipment received" (T6) applied
                            </para></listitem>
                        </itemizedlist>
                    </listitem>
                    <listitem>
                        <para>Move process ticket into the "Purchasing" queue (TA5)</para>
                        <para>To be executed when the transition "Approved" (T3) applied.</para>
                    </listitem>
                    <listitem>
                        <para>Move process ticket into the "Post office" queue (TA6)</para>
                        <para>To be executed when the transition "Order placed" (T5) applied.</para>
                    </listitem>
                </itemizedlist>
                </para>
                <para>
                    As you can see, there are places where the same Transition Actions should be
executed. Therefore it is reasonable to make it possible to link Transition
Actions freely with Transitions to be able to reuse them.
                </para>
        </section>
        <section>
            <title>Деятельность</title>
            <para>
                We chose the approach to see Activities as a basket which can contain one or
more Activity Dialogs.
            </para>
            <para>
                Click on "Activities" in the "Available Process Elements", then click on
"Create New Activity".
            </para>
            <para>
                <screenshot>
<screeninfo>Create New Activity button</screeninfo> <graphic
srccredit="process-management - screenshot"
fileref="screenshots/pm-accordion-new-activity.png"></graphic></screenshot>
            </para>
            <para>
                <emphasis>Figure: Create New Activity button.</emphasis>
            </para>
            <para>
                In the opened popup screen fill the "Activity Name", Then drap the required
Activity Dialogs from the "Available Activity Dialogs" pool, and drop then
into to the "Assigned Activity Dialogs" pool. This dialogs will be presented
(in the ticket zoom screen) in the same order as it is defined on this
screen translating from top to bottom, to left to right.
            </para>
            <para>
                This order is specially important in the first Activity, since the first
Activity Dialog for this activity is the only one that is presented when the
process starts
            </para>
            <para>
                Create the following Activities:
            </para>
            <para>
                <itemizedlist>
                    <listitem>
                        <para>Recording the demand (A1)</para>
                        <para>Contains the Activity Dialog "Recording the demand" (AD1)</para>
                    </listitem>
                    <listitem>
                        <para>Approval (A2)</para>
                        <para>
                            Contains the Activity Dialogs "Approval denied" (AD2) as well as "Approved"
(AD3)
                        </para>
                    </listitem>
                    <listitem>
                        <para>Order (A3)</para>
                        <para>
                            Contains the Activity Dialogs "Order rejected" (AD4) as well as "Order
placed" (AD5)
                        </para>
                    </listitem>
                    <listitem>
                        <para>Incoming (A4)</para>
                        <para>Contains the Activity Dialog "Shipment received" (AD6)</para>
                    </listitem>
                    <listitem>
                        <para>Process complete (A5): This is an Activity without possible
ActivityDialogs.  It will be set after "Approval denied", "Order denied" or
"Shipment received" and represents the end of the process.
                        </para>
                    </listitem>
                </itemizedlist>
            </para>
            <para>
                Now we can clearly see that Activities are precisely defined states of a
process ticket. After a successful Transition a process ticket moves from
one Activity to another.
            </para>
        </section>


        <!--  TOTO CR2 END -->
<!--  TODO CR1 The following Lines Needs to be changed to the new format... add Screens -->
<section>
            <title>Процесс заказа Книги</title>
            <para>
                Let us conclude our example with the last missing piece in the puzzle, the
Process.  In our case this is the whole ordering workflow. Other processes
could be office supply ordering or completely different processes.
            </para>

            <para>
                The process has a starting point which consists of the start Activity and
the start Activity Dialog.  For any new book order, the start Activity
Dialog is the first screen that is displayed.  If this is completed and
saved, the Process ticket will be created and can follow the configured
workflow.
            </para>

            <para>
                The process also contains the directions for how the process ticket can move
through the Process. Let's call this the "Path". It consists of the start
Activity, one or more Transitions (possibly with Transition Actions), and
other Activities.
            </para>
            <para>Запись спроса до значения "Approval"</para>
            <para>
            <itemizedlist>
                <listitem>
                    <para>Начальная точка: Activity A1 (Запись спроса)</para>
                </listitem>
                <listitem>
                    <para>Возможный переход: T1 (Approval)</para>
                    <itemizedlist>
                        <listitem>
                            <para>Если условие этой деятельности выполняется, заявка будет перемещена в
Activity A2 (Approval)</para>
                        </listitem>
                        <listitem>
                            <para>Кроме того выполнится следующее действие TransitionActions:</para>
                            <itemizedlist>
                                <listitem>
                                    <para>TA1 (Перемещает заявку в Очередь "Superior")</para>
                                </listitem>
                                <listitem>
                                    <para>TA2 (Устанавливает "Superior" ответственным за заявку)</para>
                                </listitem>
                            </itemizedlist>
                        </listitem>
                    </itemizedlist>
                </listitem>
            </itemizedlist>
            </para>
            <para>
                That's the first step in the path of the book ordering process. It looks
like this (slightly simplified):
            </para>
            <para>
                <screen>
                'A1' => {
                    'T1' => {
                        ActivityEntityID => 'A2',
                        TransitionAction => [ 'TA1', 'TA2',],
                    },
                },
                </screen>
            </para>
            <para>
                Action 'A1' is a defined state of the process ticket, where there is the
possibility for the Transition 'T1'.  If this applies, the ticket will move
to the next Activity 'A2', and the TransitionActions 'TA1' and 'TA2' are
executed.  In Activity 'A2', the Activity Dialogs 'AD2' (Approval denied)
and 'AD3' (Approved) are available.
            </para>
            <para>Утверждение</para>
            <para>
                <itemizedlist>
                    <listitem>
                        <para>Начальная точка: Деятельность A2 (Approval)</para>
                    </listitem>
                    <listitem>
                        <para>Possible Transitions:</para>
                            <itemizedlist>
                                <listitem>
                                    <para>T2 (Approval denied)</para>
                                    <itemizedlist>
                                        <listitem>
                                        <para>
                                            Если совпадает, обработка заявки будет перемещена в Activity A5 (Процесс
завершен).
                                        </para>
                                        </listitem>
                                        <listitem>
                                        <para>Кроме того выполнится следующее действие TransitionActions:</para>
                                        <itemizedlist>
                                        <listitem>
                                            <para>TA3 (перемещение заявки в Очередь "Employee")</para>
                                        </listitem>
                                        <listitem>
                                            <para>TA4 (установить ответственность за Заявку за "Employee")</para>
                                        </listitem>
                                        </itemizedlist>
                                        </listitem>
                                    </itemizedlist>
                                </listitem>
                                <listitem>
                                    <para>T3 (Утвержден)</para>
                                    <itemizedlist>
                                        <listitem>
                                        <para>
                                            Если совпадает, обработка заявки будет перемещена в Activity A3 (Заказ).
                                        </para>
                                        </listitem>
                                        <listitem>
                                            <para>Дополнительно выполнится следующее действие TransitionAction:</para>
                                            <itemizedlist>
                                            <listitem>
                                                <para>TA5 (перемещает обработку заявки в Очередь "Purchasing")</para>
                                            </listitem>
                                            </itemizedlist>
                                        </listitem>
                                    </itemizedlist>
                                </listitem>
                            </itemizedlist>
                    </listitem>
                </itemizedlist>
            </para>
            <para>Упрощенное представление:</para>
            <para>
                <screen>
            'A2' => {
                'T2' => {
                    ActivityEntityID => 'A5',
                    TransitionAction => [ 'TA3', 'TA4'],
                },
                'T3' => {
                ActivityEntityID => 'A3',
                    TransitionAction => [ 'TA5'],
                    }
            },
                </screen>
            </para>
            <para>Путь для этих двух шагов выглядит следующим образом:</para>
            <para>
                <screen>
            Path => {
                'A1' => {
                    'T1' => {
                        ActivityEntityID => 'A2',
                        TransitionAction => [ 'TA1', 'TA2'],
                    },
                },
                'A2' => {
                    'T2' => {
                        ActivityEntityID => 'A5',
                        TransitionAction => [ 'TA3', 'TA4'],
                    },
                    'T3' => {
                        ActivityEntityID => 'A3',
                        TransitionAction => [ 'TA5'],
                    },
                },
            },
                </screen>
            </para>
            <para>
                We can see that from the current Activity, which defines a state of the
process ticket, there are one or more possibilities for Transition which
have exactly one target Activity (and possibly one or more
TransitionActions).
            </para>
            <para>
                Полный путь к Процессу покупкпи книги будет иметь следующий вид:
            </para>
            <para>
                    <screen>
            Path => {
                'A1' => {
                    'T1' => {
                        ActivityEntityID => 'A2',
                        TransitionAction => [ 'TA1', 'TA2'],
                    },
                },
                'A2' => {
                    'T2' => {
                        ActivityEntityID => 'A5',
                        TransitionAction => [ 'TA3', 'TA4'],
                    },
                    'T3' => {
                        ActivityEntityID => 'A3',
                        TransitionAction => [ 'TA5'],
                    },
                },
                'A3' => {
                    'T4' => {
                        ActivityEntityID => 'A5',
                        TransitionAction => [ 'TA3', 'TA4'],
                    },
                    'T5' => {
                        ActivityEntityID => 'A4',
                        TransitionAction => [ 'TA6'],
                    },
                }
                'A4' => {
                    'T6' => {
                        ActivityEntityID => 'A5',
                        TransitionAction => [ 'TA3', 'TA4'],
                    },
                },
            },
                    </screen>
                </para>
            </section>
    </section>



<!--  TODO CR1 END -->
<!--
    <section>

        <title>Process configuration reference</title>



        <section>
            <title>Process</title>
            <para>
                A Process models the path of a workflow/process. The waypoints on
                this path can be Activities or Tranistions, we'll talk about these later.
            </para>
            <section>
                <title>Process configuration</title>
                <para>
                    The Process configuration can only be done in the file <filename>Kernel/Config.pm</filename> at this point.
                    Let's see an example process configuration:
                </para>
                <para>
                    <screen>
$Self->{'Process'}   =
{
    'P1' => {
        Name       => 'Book order',
        CreateTime => '16-02-2012 13:37:00',
        CreateBy   => '1',
        ChangeTime => '17-02-2012 13:37:00',
        ChangeBy   => '1',
        State      => 'Active',
        StartActivity => 'A1',
        StartActivityDialog => 'AD1',
        Path       => {
            'A1' => {
                'T1' => {
                    ActivityEntityID => 'A2',
                },
            },
            'A2' => {
                'T2' =>  {
                    ActivityEntityID => 'A3',
                },
            },
        },
    },
    'P2' => {
        Name       => 'IT order',
        CreateTime => '26-02-2012 13:37:00',
        CreateBy   => '1',
        ChangeTime => '27-02-2012 13:37:00',
        ChangeBy   => '1',
        State      => 'Active',
        StartActivity => 'A2',
        StartActivityDialog => 'AD2',
        Path       => {
            'A2' => {
                'T3' => {
                    ActivityEntityID => 'A4',
                },
            },
        },
    }
};
                    </screen>
                </para>
            </section>
            <section>
                <title>Name</title>
                <para>
                    The name of the process, this can be selected by the agent when creating a new process ticket.
                </para>
            </section>
            <section>
                <title>CreateTime</title>
                <para>
                    The time when the process was created.
                </para>
            </section>
            <section>
                <title>CreateBy</title>
                <para>
                    The UID of the user creating the process.
                </para>
            </section>
            <section>
                <title>ChangeTime</title>
                <para>
                    The time when the process was changed.
                </para>
            </section>
            <section>
                <title>ChangeBy</title>
                <para>
                    The UID of the user who made the last change to the process.
                </para>
            </section>
            <section>
                <title>State</title>
                <para>
                    Defines the state of a process. Possible values:
                    <itemizedlist>
                        <listitem>
                            <para>
                                'Active' are all processes which can be used in new process tickets.
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                'FadeAway' are processes which cannot be selected any more for new tickets,
                                but existing tickets still can use the process.
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                'Inactive' processes are deactivated and cannot be used for new or existing tickets.
                            </para>
                        </listitem>
                    </itemizedlist>
                </para>
            </section>
            <section>
                <title>StartActivity</title>
                <para>
                    When creating a new process ticket, a StartActivity must be defined. As soon as the ticket is created,
                    this Activity will be set and used as the base for the first transition checks.
                </para>
            </section>
            <section>
                <title>StartActivityDialog</title>
                <para>
                    For new process tickets, a StartActivityDialog must be defined. This will be shown when creating
                    a new process ticket (after the process was selected). At this point, the ticket does not exist yet,
                    it will be created after submitting the StartActivityDialog.
                </para>
            </section>
            <section>
                <title>Path</title>
                <para>
                    The Path contains the structure of the Activities and the possible Transitions between
                    them, for the current process. This controls the way that a process ticket can take. Example:
                </para>
                <para>
                <screen>
'A1' => {
    'T1' => {
        ActivityEntityID => 'A2',
    },
    'T2' => {
        ActivityEntityID => 'A3',
    },
    'T3' => {
        ActivityEntityID => 'A4',
        TransitionAction => ['TA1', 'TA2'],
    },
},
                </screen>
                </para>
                <para>
                    If a process ticket is in Activity 'A1', it has three possible ways to get to another Activity.
                    In the Transitions 'T1' to 'T3', conditions are defined, that a process ticket must fulfil to
                    move (transit) to another Activity.
                </para>
                <para>
                    If in this case all the values of the process ticket and its dynamic fields that are needed for the
                    Transition 'T2' are correct, the ticket will be moved from Activity 'A1' to 'A3'. After an ActivityDialog
                    is submitted, or any other change is made to a ticket, it will be checked for possible Transitions from
                    the current Activity. If multiple Transitions are possible, the first one will be used (based on nummerical
                    sorting of the TransitionIDs).
                </para>
                <para>
                    Additionally, it is possible to assign TransitionActions to Transitions in the Path configuration.
                    These are modules which are executed after a successful Transition. They have to be specified in array form
                    as in the example, we'll talk about the details later.
                </para>
            </section>
        </section>



        <section>
            <title>Activity</title>
            <para>
                An Activity contains one or more ActivityDialogs and models a 'step' in the process.
                All ActivityDialogs of the current Activity are displayed in the ticket zoom and can be
                used until the conditions of a Transition are fulfilled.
            </para>
            <section>
            <title>Activity configuration</title>
            <para>
                Let's see an example activity configuration:
            </para>
            <para>
                <screen>
$Self->{'Process::Activity'} =
{
    'A1' => {
        Name       => 'Activity 1 optional',
        CreateTime => '16-02-2012 13:37:00',
        CreateBy   => '1',
        ChangeTime => '17-02-2012 13:37:00',
        ChangeBy   => '1',
        ActivityDialog => {
            1 => 'AD1',
        },
    },
    'A2' => {
        Name       => 'Activity 2 optional',
        CreateTime => '16-02-2012 13:37:00',
        CreateBy   => '1',
        ChangeTime => '17-02-2012 13:37:00',
        ChangeBy   => '1',
        ActivityDialog => {
            1 => 'AD5',
            2 => 'AD6',
            3 => 'AD1',
        },
    },
};
                </screen>
            </para>
            </section>
            <section>
                <title>Name</title>
                <para>
                    The name of the activity.
                </para>
            </section>
            <section>
                <title>CreateTime</title>
                <para>
                    The time when it was created.
                </para>
            </section>
            <section>
                <title>CreateBy</title>
                <para>
                    UID of the user who created the Activity.
                </para>
            </section>
            <section>
                <title>ChangeTime</title>
                <para>
                    The last time when it was changed.
                </para>
            </section>
            <section>
                <title>ChangeBy</title>
                <para>
                    UID of the last user who changed the Activity.
                </para>
            </section>
            <section>
                <title>ActivityDialog</title>
                <para>
                    ActivityDialog contains the list of ActivityDialogs which are available in this Activity.
                    All ActivityDialogs of the current Activity are displayed in the ticket zoom. Their order is
                    set by the order in the configuration, here 'AD5' is shown before 'AD6' and 'AD1'.
                </para>
            </section>
        </section>



        <section>
            <title>ActivityDialog</title>
            <para>
                An ActivityDialog is a particular screen and can be used in different Activities.
            </para>
            <section>
                <title>ActivityDialog configuration</title>
                <para>
                    Let's see an example config
                </para>
                <para>
                    <screen>
$Self->{'Process::ActivityDialog'} = {
    'AD1' => {
        Name => 'ActivityDialog 1 optional',
        DescriptionShort => 'Basic info',
        DescriptionLong  => 'Please insert the necessesary basic information for IT orders',
        CreateTime => '28-02-2012 13:37:00',
        CreateBy => '1',
        ChangeTime => '29-02-2012 13:37:00',
        ChangeBy => '1',
        Fields => {
            PriorityID => {
                DescriptionShort => 'Priority ID',
                DescriptionLong  => 'Enter the priority here',
                Display => 2,
            },
        },
        FieldOrder       => [ 'PriorityID' ],
        SubmitAdviceText => 'Note: If you submit the form...',
        SubmitButtonText => 'Send request',
    },
    'AD2' => {
        Name => 'ActivityDialog 2 optional',
        DescriptionShort => 'Basic info',
        DescriptionLong  => 'Please insert the necessesary basic information for Book orders',
        CreateTime => '28-02-2012 13:37:00',
        CreateBy => '1',
        ChangeTime => '29-02-2012 13:37:00',
        ChangeBy => '1',
        Fields => {
            StateID => {
                DescriptionShort    => 'State ID',
                DescriptionLong     => 'Enter the state here',
                Display             => 2,
                DefaultValue        => '2',
            },
            Queue => {
                DescriptionShort    => 'Queue ID',
                DescriptionLong     => 'Enter the queue here',
                Display             => 2,
                DefaultValue        => 'Raw',
            },
            Title => {
                DescriptionShort    => 'Title',
                DescriptionLong     => 'Enter the title here',
                Display             => 1,
                DefaultValue        => 'Default Title',
            },
            DynamicField_Anzahl => {
                DescriptionShort    => 'Amount',
                DescriptionLong     => 'Enter the amount here',
                Display             => 2,
                DefaultValue        => '4',
            },
        },
        FieldOrder       => [ 'DynamicField_Anzahl', 'StateID', 'Queue', 'Title' ],
        SubmitAdviceText => 'Note: If you submit the form...',
        SubmitButtonText => 'Send request',
    },
};
                    </screen>
                </para>
            </section>
            <section>
                <title>Name</title>
                <para>
                    Name of the ActivityDialog.
                </para>
            </section>
            <section>
                <title>CreateTime</title>
                <para>
                    Time when it was created.
                </para>
            </section>
            <section>
                <title>CreateBy</title>
                <para>
                    UID of the user who created this ActivityDialog.
                </para>
            </section>
            <section>
                <title>ChangeTime</title>
                <para>
                    Last time when it was changed.
                </para>
            </section>
            <section>
                <title>ChangeBy</title>
                <para>
                    UID of the last user who changed this ActivityDialog.
                </para>
            </section>
            <section>
                <title>Fields</title>
                <para>
                    Contains all fields which can be displayed in this ActivityDialog.
                    The following fields can currently be used:
                </para>
                <para>
                    <screen>
Title
State
StateID
Priority
PriorityID
Lock
LockID
Queue
QueueID
Customer
CustomerID
CustomerNo
CustomerUserID
Owner
OwnerID
Type
TypeID
SLA
SLAID
Service
ServiceID
Responsible
ResponsibleID
PendingTime
DynamicField_$FieldName  # for all dynamic fields
                    </screen>
                </para>
                <para>
                    Example of a single field configuration:
                </para>
                <para>
                    <screen>
StateID => {
    DescriptionShort    => 'State ID',
    DescriptionLong     => 'Enter the state here',
    Display             => 2,
    DefaultValue        => '2',
},
                    </screen>
                </para>
                <para>
                    The field "Article" is a special case. If it is present in a "Fields" configuration, the ActivityDialog
                    will contain a complete Richtext editor with subject field and attachment handling.
                    The entered text will then be added to the ticket as an article and sent by email.
                    Let's see an example Article field configuration:
                    <screen>
Article => {
    DescriptionShort => 'Please insert your comment here.',
    DescriptionLong => '',
    Display         => 1,
    Config          => {
        ArticleType  => 'note-internal',
        LabelSubject => '',
        LabelBody    => '',
    },
},
                    </screen>
                </para>
                <para>
                    Let's look at the field configuration options:
                </para>
                <section>
                    <title>DescriptionShort</title>
                    <para>
                        Optional short description that is shown with the field title.
                    </para>
                </section>
                <section>
                    <title>DescriptionLong</title>
                    <para>
                        Optional longer field description that is shown then the mouse is over the field,
                        for example advice on how to fill out the field.
                    </para>
                </section>
                <section>
                    <title>Display</title>
                    <para>
                        Controls if the field is shown and/or mandatory.
                        Possible values:

                        <itemizedlist>
                            <listitem>
                                <para>
                                    '0': field is invisible. This can be helpful if field values should automatically be set.
                                    The configured DefaultValue will be stored in this case.
                                </para>
                            </listitem>
                            <listitem>
                                <para>
                                    '1': field is visible, but optional.
                                </para>
                            </listitem>
                            <listitem>
                                <para>
                                    '2': field is visible and mandatory.
                                    The following fields can only be invisible or mandatory:
                                    <screen>
    QueueID
    Qeue
    StateID
    State
    Lock
    LockID
    Priority
    Priority
                                </screen>
                                </para>
                            </listitem>
                        </itemizedlist>
                    </para>
                    <para>
                        If fields are configured as optional, and no value is submitted by the user, the DefaultValue
                        will be saved when the ActivityDialog is submitted by the user.
                    </para>
                </section>
                <section>
                    <title>DefaultValue</title>
                    <para>
                        For fields with 'ID' (like QueueID, OwnerID), this refers to the database ID of the value.
                        For other fields without 'ID' (like Queue, Owner), the DefaultValue must contain the value itself. Example:
                    </para>
                    <para>
                        <screen>
Queue => {
    DescriptionShort    => 'Queue',
    DescriptionLong     => 'Enter the queue here',
    Display             => 2,
    DefaultValue        => 'Raw',
},
                        </screen>
                    </para>
                </section>
            </section>
            <section>
                <title>FieldOrder</title>
                <para>
                    Here the display order of the fields is configured.
                    IMPORTANT: Invisible fields also must be configured here, because only configured fields will be considered
                    when saving. Fields which are not configured will not be saved.
                </para>
            </section>
            <section>
                <title>SubmitAdviceText</title>
                <para>
                    Optional text to be shown right above the submit botton for additional help or advice text.
                </para>
            </section>
            <section>
                <title>SubmitButtonText</title>
                <para>
                    Optional custom text for the submit button.
                </para>
            </section>
        </section>



        <section>
            <title>Transition</title>
            <para>
                A Transition decides - based on configurable conditions - which path in the Process
                is taken, i. e. to which Activity a Process ticket can be moved.
            </para>
            <section>
                <title>Transition configuration</title>
                <para>
                    Let's see an example:
                </para>
                <para>
                    <screen>
$Self->{'Process::Transition'} = {
    'T1' => {
        Name => 'Transition 1',
        CreateTime => '14-03-2012 13:37:00', # optional
        CreateBy => '1', # optional
        ChangeTime => '15-03-2012 13:37:00', # optional
        ChangeBy => '15-03-2012 13:37:00', # optional
        Condition => {
            Cond1 => {
                Fields => {
                    StateID => {
                        Type => 'String',
                        Match => '1',
                    },
                },
            },
        },
    },
    'T2' => {
        Name => 'Transition 2 optional',
        CreateTime => 'DATE', # optional
        CreateBy => 'USERID', # optional
        ChangeTime => 'DATE', # optional
        ChangeBy => 'USERID', # optional
        Condition => {
            Cond1 => {
                Queue => 'Raw',
                DynamicField_Farbe => '2',
                DynamicField_Anzahl => '1',
            },
        },
    },
};
                    </screen>
                </para>
            </section>
            <section>
                <title>Name</title>
                <para>
                    Name of the transition.
                </para>
            </section>
            <section>
                <title>CreateTime</title>
                <para>
                    Time when it was created.
                </para>
            </section>
            <section>
                <title>CreateBy</title>
                <para>
                    UID of the user who created this Transition.
                </para>
            </section>
            <section>
                <title>ChangeTime</title>
                <para>
                    Last time when it was changed.
                </para>
            </section>
            <section>
                <title>ChangeBy</title>
                <para>
                    UID of the last user who changed this Transition.
                </para>
            </section>
            <section>
                <title>Condition</title>
                <para>
                    Contains all conditions that are neccessary for this Transition to take effect. Example:
                </para>
                <para>
                    <screen>
Condition => {
    Type => 'and',
    Cond1 => {
        Type => 'and',
        Fields => {
            StateID => {
                Type => 'String',
                Match => '1',
            },
            DynamicField_Marke => {
                Type => 'String',
                Match => 'VW',
        },
    },
    Cond2 => {
        Type => 'and',
        Fields => {
            Queue => {
                Type => 'String',
                Match => 'Raw',
            },
        },
    },
},
                    </screen>
                </para>
                <para>
                    Let's look at the condition configuration in detail.
                </para>
                <section>
                    <title>Type (Condition)</title>
                    <para>
                        Specifies the way the different condition elements are connected to each other.
                        Possible values:
                        <itemizedlist>
                            <listitem>
                                <para>
                                    'and': This is the default. All conditions must be met for the transition
                                    to take effect.
                                </para>
                            </listitem>
                            <listitem>
                                <para>
                                    'or': At least one condition must match.
                                </para>
                            </listitem>
                            <listitem>
                                <para>
                                    'xor': Exactly one condition must match, not more.
                                </para>
                            </listitem>
                        </itemizedlist>
                    </para>
                </section>
                <section>
                    <title>Cond1</title>
                    <para>
                        This is the name of an example condition. It can be freely choosen. Conditions are evaluated
                        in sorted order.
                    </para>
                </section>
                <section>
                    <title>Type (Cond)</title>
                    <para>
                        Specifies the way how the individual field tests of this condition are connected to each other.
                        Possible values:

                        <itemizedlist>
                            <listitem>
                                <para>
                                    'and': This is the default. All field tests must match for this condition to match.
                                </para>
                            </listitem>
                            <listitem>
                                <para>
                                    'or': At least one field test must match.
                                </para>
                            </listitem>
                            <listitem>
                                <para>
                                    'xor': Exactly one field test must match, not more.
                                </para>
                            </listitem>
                        </itemizedlist>
                    </para>
                </section>
                <section>
                    <title>Fields</title>
                    <para>
                        Specifies the particular fields whose values should be tested. From our example:
                        <screen>
Fields => {
    StateID => {
        Type => 'String',
        Match => '1',
    },
                        </screen>
                    </para>
                </section>
                <section>
                    <title>StateID</title>
                    <para>
                        Example of a field name. The following ticket fields can be used:
                        <screen>
Title
State
StateID
Priority
PriorityID
Lock
LockID
Queue
QueueID
Customer
CustomerID
CustomerNo
CustomerUserID
Owner
OwnerID
Type
TypeID
SLA
SLAID
Service
ServiceID
Responsible
ResponsibleID
PendingTime
DynamicField_$FieldName # for all DynamicFields
                        </screen>
                    </para>
                    <para>
                        When testing a field with 'ID' (like SLAID), the database ID of the field will be used for testing,
                        for other fields (like SLA) the actual value is used for testing.
                    </para>
                </section>
                <section>
                    <title>Type</title>
                    <para>
                        Determines the kind of field testing. Possible values:

                        <itemizedlist>
                            <listitem>
                                <para>
                                    'String': Compares the field value with the string specified in 'Match'. Matches
                                    if they are exactly the same.
                                </para>
                            </listitem>
                            <listitem>
                                <para>
                                    'Hash': Compares the field value (hash) with the hash specified in 'Match'.
                                    All hash values must be the same.
                                </para>
                            </listitem>
                            <listitem>
                                <para>
                                    'Array': Compares the field value (array) with the array specified in 'Match'.
                                    Both lists must be the same.
                                </para>
                            </listitem>
                            <listitem>
                                <para>
                                    'Regex': The field value can be tested with a regular expression. It is important that
                                    'Match' contains qr{}xms as a base condition. Between the braces the actual regular expression
                                    can be noted.
                                </para>
                            </listitem>
                            <listitem>
                                <para>
                                    'Module': Allows you to use a perl module for condition checking. If it returns 1, the check
                                    was positive. You can find an example module in
                                    <filename>Kernel/System/ProcessManagement/TransitionValidation/ValidateDemo.pm</filename>.
                                </para>
                            </listitem>
                        </itemizedlist>
                    </para>
                </section>
            </section>
        </section>



        <section>
            <title>TransitionActions</title>
            <para>
                TransitionActinons are actions which can be triggered after successfully applied transitions (when a
                process ticket moves from one activity to another). These TransitionActions can be used to perform different changes on
                the ticket, e. g. change the Queue or the Owner of the ticket, and you can also create your own TransitionActions to
                perform other complex changes.
            </para>
            <section>
                <title>TransitionAction configuration</title>
                <para>
                    Let's see an example:

                    <screen>
$Self->{'Process::TransitionAction'} = {
    'TA1' => {
        Name => 'Queue Move',
        Module => 'Kernel::System::ProcessManagement::TransitionAction::QueueMove',
        Config => {
            TargetQueue => 'Junk',
        },

    },
};
                    </screen>
                </para>
            </section>
            <section>
                <title>Name</title>
                <para>
                    The name of the TransitionAction.
                </para>
            </section>
            <section>
                <title>Module</title>
                <para>
                    Specifies the Perl module to be used.
                </para>
            </section>
            <section>
                <title>Config</title>
                <para>
                    This parameter contains all settings which are required for the module. Its content
                    depends on the particular TransitionAction module which is used. Please see the documentation
                    of the individual modules for details. In our example, only the TargetQueue must be specified.
                </para>
            </section>
            <section>
                <title>Reusing TransitionAction modules</title>
                <para>
                    To use TransitionAction modules mulptiple times, just specify several TransitionActions in your configuration.
                    Example:

                    <screen>
    $Self->{'Process::TransitionAction'} = {
        'TA1' => {
            Name => 'Queue Move Junk',
            Module => 'Kernel::System::ProcessManagement::TransitionAction::QueueMove',
            Config => {
                TargetQueue => 'Junk',
            },

        },
        'TA2' => {
            Name => 'Queue Move Raw',
            Module => 'Kernel::System::ProcessManagement::TransitionAction::QueueMove',
            Config => {
                TargetQueue => 'Raw',
            },

        },
    };
                    </screen>
                </para>
                <para>
                    Here the same module is used to move a process ticket into the 'Raw' queue, and another time
                    to move it into the junk queue. The TransitionAction which must be used for a particular Transition
                    is determined from the 'Path' setting of the Process configuration.
                </para>
            </section>
            <section>
                <title>Available TransitionActions</title>
                <para>
                    OTRS comes with several TransitionActions that can be used in your processes.
                    Here you can find their documentation and how they need to be configured.
                </para>

                <section>
                    <title>ArticleCreate</title>
                    <para>
                        Creates an article and can be used to create notes or email replies. Example:
                    </para>
                    <para>
                        <screen><![CDATA[
$Self->{'Process::TransitionAction'} = {
    'TA1' => {
        Name   => 'Article Create Note Internal',
        Module => 'Kernel::System::ProcessManagement::TransitionAction::ArticleCreate',
        Config => {
            ArticleType => 'note-internal',    # email-external|email-internal|phone|fax|...
            SenderType  => 'agent',            # agent|system|customer
            ContentType =>
                'text/plain; charset=ISO-8859-15',    # or optional Charset & MimeType
            Subject     => 'some short description',  # required
            Body        => 'the message text',        # required
            HistoryType => 'OwnerUpdate',             # EmailCustomer|Move|AddNote|PriorityUpdate|WebRequestCustomer|...
            HistoryComment => 'Some free text!',
            From           => 'Some Agent <email@example.com>',    # not required but useful
            To      => 'Some Customer A <customer-a@example.com>', # not required but useful
            Cc      => 'Some Customer B <customer-b@example.com>', # not required but useful
            ReplyTo => 'Some Customer B <customer-b@example.com>', # not required
            InReplyTo => '<asdasdasd.12@example.com>',             # not required but useful
            References => '<asdasdasd.1@example.com> <asdasdasd.12@example.com>',   # not required but useful
            NoAgentNotify => 0,    # if you don't want to send agent notifications
            AutoResponseType =>
                'auto reply', # auto reject|auto follow up|auto reply/new ticket|auto remove

            ForceNotificationToUserID => [ 1, 43, 56 ],    # if you want to force somebody
            ExcludeNotificationToUserID => [ 43, 56 ],
                 # if you want full exclude somebody from notfications,
                 # will also be removed in To: line of article,
                 # higher prio as ForceNotificationToUserID
            ExcludeMuteNotificationToUserID => [ 43, 56 ],
                 # the same as ExcludeNotificationToUserID but only the
                 # sending gets muted, agent will still shown in To:
                 # line of article
        },
    },
};
                        ]]></screen>
                    </para>
                    <para>
                        'Name' specifies the name of the configured TransitionAction.
                        It can be freely chosen, but should reflect the purpose of the configured action.
                    </para>
                    <para>
                        'ArticleType' defines the type of the article to be created. Possible values:
                        email-external, email-internal, email-notification-ext, email-notification-int,
                        phone, fax, sms, webrequest, note-internal, note-external, note-report.
                    </para>
                    <para>
                        SenderType defines the sender type of the article. Possible values: agent, system, customer.
                    </para>
                    <para>
                        'ContentType' defines the content type of the article. Possible values:
                        'text/plain; charset=ISO-8859-15' or any other valid charset and mime type.
                    </para>
                    <para>
                        'Subject' defines the article title. Mandatory.
                    </para>
                    <para>
                        'Body' defines the article content. Mandatory.
                    </para>
                    <para>
                        HistoryType defines the type of the history entry. Possible values:
                        AddNote, ArchiveFlagUpdate, Bounce, CustomerUpdate, EmailAgent, EmailCustomer,
                        EscalationResponseTimeNotifyBefore, EscalationResponseTimeStart, EscalationResponseTimeStop,
                        EscalationSolutionTimeNotifyBefore, EscalationSolutionTimeStart, EscalationSolutionTimeStop,
                        EscalationUpdateTimeNotifyBefore, EscalationUpdateTimeStart, EscalationUpdateTimeStop,
                        FollowUp, Forward, Lock, LoopProtection, Merged, Misc, Move, NewTicket, OwnerUpdate,
                        PhoneCallAgent, PhoneCallCustomer, PriorityUpdate, Remove, ResponsibleUpdate,
                        SendAgentNotification, SendAnswer, SendAutoFollowUp, SendAutoReject, SendAutoReply,
                        SendCustomerNotification, ServiceUpdate, SetPendingTime, SLAUpdate, StateUpdate,
                        Subscribe, SystemRequest, TicketDynamicFieldUpdate, TicketLinkAdd, TicketLinkDelete,
                        TimeAccounting, TypeUpdate, Unlock, Unsubscribe, WebRequestCustomer.
                    </para>
                    <para>
                        'HistoryComment' defines the content of the history entry.
                    </para>
                    <para>
                        'From', 'To', 'Cc' and 'ReplyTo' take email addresses in the notation specified above.
                    </para>
                    <para>
                        'InReplyTo' and 'References' take email message IDs.
                    </para>
                    <para>
                        'NoAgentNotify' - if set to 1, the email notification of the Agent will not be sent.
                    </para>
                    <para>
                        'AutoResponseType' can take the following values:
                        auto follow up, auto reject, auto remove, auto reply, auto reply/new ticket.
                    </para>
                    <para>
                        'ForceNotificationToUserID', 'ExcludeNotificationToUserID',  'ExcludeMuteNotificationToUserID'
                        can take a list of UserIDs that are either always notified, not notified or listed as notified
                        but not actually sent a notification email.
                    </para>
                </section>

                <section>
                    <title>CustomerSet</title>
                    <para>
                        Sets the customer of a process ticket. Example:
                    </para>
                    <para>
                        <screen><![CDATA[
$Self->{'Process::TransitionAction'} = {
    'TA1' => {
        Name   => 'Customer Set Customer to test',
        Module => 'Kernel::System::Process::TransitionAction::CustomerSet',
        Config => {
            No      => 'test',
            User    => 'client-user-123',
            # or in other words
            # CustomerID     => 'client123',
            # CustomerUserID => 'client-user-123',

        },
    },
};
                        ]]></screen>
                    </para>
                    <para>
                        'Name' specifies the name of the configured TransitionAction.
                    </para>
                    <para>
                        No or CustomerID set the Customer ID of the customer.
                    </para>
                    <para>
                        User or CustomerUserID set the Username of the customer.
                    </para>
                </section>

                <section>
                    <title>DynamicFieldSet</title>
                    <para>
                        Sets one or more dynamic fields at a process ticket. Example:
                    </para>
                    <para>
                        <screen><![CDATA[
$Self->{'Process::TransitionAction'} = {
    'TA1' => {
        Name   => 'Set DynamicField Master to Master and Approved to 1',
        Module => 'Kernel::System::ProcessManagement::TransitionAction::DynamicFieldSet',
        Config => {
            MasterSlave => 'Master',
            Approved    => '1',

        },
    },
};
                        ]]></screen>
                    </para>
                    <para>
                        'Name' specifies the name of the configured TransitionAction.
                    </para>
                    <para>
                        'MasterSlave' and 'Approved' are given as examples of DynamicField names.
                        The values of the fields ('Master' and '1') will be set by this TransitionAction.
                    </para>
                </section>

                <section>
                    <title>OwnerSet</title>
                    <para>
                        Changes the owner of a process ticket. Example:
                    </para>
                    <para>
                        <screen><![CDATA[
$Self->{'Process::TransitionAction'} = {
    'TA1' => {
        Name   => 'Owner Set root@localhost',
        Module => 'Kernel::System::ProcessManagement::TransitionAction::OwnerSet',
        Config => {
            Owner => 'root@localhost',
            # or
            OwnerID => 1,
        },
    },
};
                        ]]></screen>
                    </para>
                    <para>
                        'Name' specifies the name of the configured TransitionAction.
                    </para>
                    <para>
                        'Owner' specifies the login name of the new owner.
                    </para>
                    <para>
                        'OwnerID' specifies the internal ID of the new owner.
                    </para>
                </section>

                <section>
                    <title>ResponsibleSet</title>
                    <para>
                        Changes the responsible of a process ticket. Example:
                    </para>
                    <para>
                        <screen><![CDATA[
$Self->{'Process::TransitionAction'} = {
    'TA1' => {
        Name   => 'Responsible Set root@localhost',
        Module => 'Kernel::System::ProcessManagement::TransitionAction::ResponsibleSet',
        Config => {
            Responsible => 'root@localhost',
            # or
            ResponsibleID => 1,
        },
    },
};
                        ]]></screen>
                    </para>
                    <para>
                        'Name' specifies the name of the configured TransitionAction.
                    </para>
                    <para>
                        'Responsible' specifies the login name of the new responsible.
                    </para>
                    <para>
                        'ResponsibleID' specifies the internal ID of the new responsible.
                    </para>
                </section>

                <section>
                    <title>QueueMove</title>
                    <para>
                        Moves the ticket into a target queue. Example:
                    </para>
                    <para>
                        <screen><![CDATA[
$Self->{'Process::TransitionAction'} = {
    'TA1' => {
        Name   => 'Queue Move Raw',
        Module => 'Kernel::System::ProcessManagement::TransitionAction::QueueMove',
        Config => {
            TargetQueue => 'Raw',
            # or
            # TargetQueueID => '2',
        },
    },
};
                        ]]></screen>
                    </para>
                    <para>
                        'Name' specifies the name of the configured TransitionAction.
                    </para>
                    <para>
                        'TargetQueue' specifies the name of the target queue.
                    </para>
                    <para>
                        'TargetQueueID' specifies the internal ID of the target queue.
                    </para>
                </section>

                <section>
                    <title>StateSet</title>
                    <para>
                        Changes the state of a process ticket.
                        The state can be changed unconditionally or based on a condition. This condition is evaluated based on a
                        defined DynamicField. If the value of the DynamicField at the time of the evaluation is not in one of
                        the conditions, nothing will be changed. Example:
                    </para>
                    <para>
                        <screen><![CDATA[
$Self->{'Process::TransitionAction'} = {
    'TA1' => {
        Name   => 'Set State if it is a MasterTicket',
        Module => 'Kernel::System::ProcessManagement::TransitionAction::StateSet',
        Config => {
            State  => 'open',
            # or
            StateID => 3,

            #OR (DynamicField state mapping)
            DynamicField        => 'MasterSlave', # or DynamicField_MasterSlave
            DynamicFieldMapping => {
                Master           => {
                    State => 'open'
                }
                # or
                Master           => {
                    StateID => 3
                }
            },
        },
    },
};
                        ]]></screen>
                    </para>
                    <para>
                        'Name' specifies the name of the configured TransitionAction.
                    </para>
                    <para>
                        'State' defines the new state of the process ticket.
                    </para>
                    <para>
                        'StateID' defines the internal ID of the new state.
                    </para>
                    <para>
                        'DynamicField' defines the name of the DynamicField that should be used as the
                        basis of the condition check to determine the new state. The name may include
                        a leading 'DynamicField_' string.
                    </para>
                    <para>
                        'DynamicFieldMapping' defines the condition that determines the new state of the process ticket.
                        For every value, a State or StateID must be specified. If none of the values match,
                        the state will not be changed.
                    </para>
                </section>
            </section>
        </section>



        <section>
            <title>Access Control Lists (ACLs)</title>
            <para>
                With the help of ACLs, you can limit selectable values in process tickets.
            </para>
            <section>
                <title>ACL configuration</title>
                <para>
                    ACLs can only be defined in <filename>Kernel/Config.pm</filename>. Example:
                </para>
                <para>
                    <screen>
$Self->{TicketAcl}->{'001-ACL-ProcessProperties'} = {
    Properties => {
        Process => {
            ProcessEntityID        => ['P1'],
            ActivityEntityID       => ['A1'],
            ActivityDialogEntityID => ['AD1'],
        }
    },
    Possible => {
        ActivityDialog => ['AD1', 'AD3'],
    },
    PossibleNot => {
        ActivityDialog => ['AD3'],
    },
};
                    </screen>
                </para>
            </section>
            <section>
                <title>001-ACL-ProcessProperties</title>
                <para>
                    Name of the ACL rule. For further information on ACL rules in general, please consult
                    <ulink url="http://doc.otrs.org/3.2/en/html/customization.html#acl">the manual</ulink>.
                </para>
            </section>
            <section>
                <title>Process</title>
                <para>
                    This is the section that is used to check if an ACL must be applied. If it has the
                    specified values, the rule is applied. The following values can be used:
                </para>
                <section>
                    <title>ProcessEntityID</title>
                    <para>
                        The ID of a process that the process. Matches if the ticket is assigned to this process.
                    </para>
                </section>
                <section>
                    <title>ActivityEntityID</title>
                    <para>
                        The ID of the Activity that the process ticket currently is assigned to.
                    </para>
                </section>
                <section>
                    <title>ActivityDialogEntityID</title>
                    <para>
                        The ID of the ActivityDialog that is currently open for a process ticket.
                    </para>
                </section>
            </section>
            <section>
                <title>Possible/PossibleNot ActivityDialog</title>
                <para>
                    Here you can specify a list of ActivityDialog IDs. This list will limit the possible
                    ActivityDialogs that are offered to the user in the ticket zoom mask.
                </para>
                <para>
                    'Possible' lists the ActivityDialogs that are allowed. The setting above will only
                    allow 'AD1' and 'AD3' of the list of configured ActivityDialogs.
                </para>
                <para>
                    'PossibleNot' lists the ActivityDialogs that are not allowed.
                    In the example above, the setting will remove 'AD3' from the list of configured
                    ActivityDialogs.
                </para>
                <para>
                    If both 'Possible' and 'PossibleNot' are specified, the list of configured ActivityDialogs
                    will first be filtered by 'Possible', leaving only 'AD1' and 'AD3' in our example. Then
                    'PossibleNot' will be applied and filter out 'AD3', so that only 'AD1' remains and is shown
                    as a possible ActivityDialog that the user can use.
                </para>
                <para>
                    If multiplie ACL rules match, the intersection of all matching rules will be calculated
                    to determine the possible ActivityDialogs. Example:
                </para>
                <para>
                    Configured ActivityDialogs: 'AD1', 'AD2', 'AD3', 'AD4', 'AD5', 'AD6', 'AD7'.

                    <screen>
$Self->{TicketAcl}->{'001-ACL-Status'} = {
    Properties => {
        Ticket => {
            Status       => 'new',
        }
    },
    Possible => {
        ActivityDialog => ['AD1', 'AD2', 'AD3', 'AD6', 'AD7'],
    },
};
$Self->{TicketAcl}->{'002-ACL-Queue'} = {
    Properties => {
        Ticket => {
            Queue        => ['Raw']
        }
    },
    Possible => {
        ActivityDialog => ['AD2', 'AD3', 'AD4', 'AD7'],
    },
};
$Self->{TicketAcl}->{'003-ACL-Priority'} = {
    Properties => {
        Ticket => {
            Priority        => ['3 normal']
        }
    },
    PossibleNot => {
        ActivityDialog => ['AD3', 'AD4'],
    },
};
                    </screen>
                </para>
                <para>
                    If a process ticket has the state 'new', is in the 'Raw' queue and has a priority '3 normal', then all
                    three ACL rules will match.
                </para>
                <para>
                    The first rule reduces the ActivityDialogs from 'AD1', 'AD2', 'AD3', 'AD4', 'AD5', 'AD6', 'AD7' to
                    'AD1', 'AD2', 'AD3', 'AD6', 'AD7' and forbids 'AD4' and 'AD5'.
                </para>
                <para>
                    The second rule will now further reduce the remaining ActivityDialogs.
                    In our example, 'AD2', 'AD3', 'AD7' will remain.
                </para>
                <para>
                    Now the third rule will further reduce the list by 'PossibleNot'.
                    'AD3' is removed from the list. 'AD4' is not removed, since it was not on the list in the first place.
                    At the end, 'AD2' and 'AD7' remain as possible ActivityDialogs that the user can utilize.
                </para>
            </section>
        </section>
    </section>
-->
</section>
